# 岁阅平台测试指南

## 🚀 启动应用

```bash
cd suiyue-memoir
npm run dev
```

访问：http://localhost:3000

## ✅ 已完成功能测试

### 1. 用户认证系统

#### 手机登录测试
1. 点击首页右上角"登录"按钮
2. 选择"手机登录"标签
3. 输入任意手机号（如：13800138000）
4. 点击"发送验证码"
5. 输入验证码：`123456`
6. 点击"登录"

#### 微信登录测试
1. 点击首页右上角"登录"按钮
2. 选择"微信登录"标签
3. 点击"授权微信登录"
4. 自动完成模拟登录

### 2. 用户工作台

#### 访问工作台
- **方式1：** 登录后点击首页"进入工作台"按钮
- **方式2：** 直接访问 http://localhost:3000/dashboard

#### 工作台功能
- ✅ 显示用户信息和问候语
- ✅ 显示项目统计卡片（总数、写作中、已完成）
- ✅ 显示项目列表和进度条
- ✅ 退出登录功能

### 3. 回忆录项目管理

#### 创建新项目
1. 在工作台点击"创建新项目"按钮
2. **第一步：基本信息**
   - 输入项目标题（如：我的童年回忆）
   - 输入项目描述（如：记录我美好的童年时光）
   - 点击"下一步"
3. **第二步：选择封面**
   - 选择喜欢的封面风格（经典、优雅、现代等）
   - 预览封面效果
   - 点击"创建项目"

#### 查看项目列表
- 新创建的项目会显示在列表顶部
- 显示项目状态、创建时间、更新时间
- 显示项目进度条

### 4. TipTap富文本编辑器

#### 进入编辑器
1. 在工作台项目列表中点击"写作"按钮
2. 或直接访问：http://localhost:3000/editor/[项目ID]

#### 章节管理功能
- ✅ **创建章节** - 点击左侧"+ 新章节"按钮
- ✅ **编辑章节标题** - 点击章节旁边的编辑图标
- ✅ **选择章节** - 点击章节切换编辑内容
- ✅ **章节状态显示** - 绿色（已完成）、黄色（进行中）、灰色（未开始）
- ✅ **字数统计** - 每个章节显示字数和更新时间

#### 富文本编辑功能
- ✅ **文本格式** - 加粗(B)、斜体(I)、删除线(S)
- ✅ **标题样式** - H1、H2、H3 三级标题
- ✅ **列表功能** - 无序列表(•)、有序列表(1.)
- ✅ **引用和分割线** - 引用("")、水平分割线(―)
- ✅ **媒体插入** - 图片(📷)、链接(🔗)
- ✅ **撤销重做** - 撤销(↶)、重做(↷)
- ✅ **实时字数统计** - 显示字符数和词数

#### 自动保存功能
- ✅ **实时保存** - 停止编辑2秒后自动保存
- ✅ **保存状态指示** - 顶部显示保存状态（保存中、已保存、未保存）
- ✅ **保存时间显示** - 显示最后保存时间

### 5. 🆕 照片上传功能

#### 访问照片上传
1. 在编辑器页面点击"📷 上传照片"按钮
2. 或在富文本工具栏点击📷图标

#### 拖拽上传测试
- ✅ **拖拽上传** - 直接拖拽图片文件到上传区域
- ✅ **点击上传** - 点击上传区域选择文件
- ✅ **格式支持** - JPG、PNG、GIF、WebP格式
- ✅ **文件大小限制** - 最大10MB
- ✅ **批量上传** - 支持同时选择多个图片

#### 图片管理功能
- ✅ **上传进度** - 显示上传进度和状态
- ✅ **图片预览** - 网格布局显示已上传图片
- ✅ **图片信息** - 显示文件名和大小
- ✅ **插入操作** - 点击"插入"按钮将图片添加到编辑器
- ✅ **删除操作** - 移除不需要的图片
- ✅ **URL上传** - 支持通过URL链接添加图片

#### 编辑器集成
- ✅ **自动插入** - 上传完成后可一键插入到编辑器
- ✅ **样式优化** - 图片自动应用响应式样式
- ✅ **位置控制** - 可在文档任意位置插入图片

### 6. 🆕 PDF导出功能

#### 访问PDF导出
1. 在编辑器页面点击顶部"📄 PDF导出"按钮
2. 导出面板会在编辑器上方展开

#### 完整回忆录导出
- ✅ **封面页** - 自动生成包含项目标题、描述的封面
- ✅ **目录页** - 自动生成章节目录和页码
- ✅ **章节内容** - 按顺序导出所有章节
- ✅ **页码** - 自动添加页码
- ✅ **统计信息** - 显示总章节数、字数、预估页数
- ✅ **导出进度** - 实时显示导出进度条

#### 单章节导出
- ✅ **章节选择** - 可选择任意单个章节导出
- ✅ **章节信息** - 显示每章节字数和状态
- ✅ **独立PDF** - 每个章节生成独立的PDF文件
- ✅ **快速导出** - 小文档快速生成

#### PDF文档特性
- ✅ **中文支持** - 支持中文字符显示
- ✅ **格式保持** - 保持基本文本格式
- ✅ **自动分页** - 内容超长时自动分页
- ✅ **元数据** - 包含创建时间、字数等信息
- ✅ **文件命名** - 自动生成包含日期的文件名

### 7. 页面路由

- ✅ 首页：`/`
- ✅ 工作台：`/dashboard`
- ✅ 编辑器：`/editor/[projectId]`
- ✅ 登录状态保持（刷新页面保持登录）

## 🎨 UI/UX 特性

### 响应式设计
- ✅ 支持桌面端和移动端
- ✅ 自适应布局
- ✅ 图片上传区域响应式网格

### 交互体验
- ✅ 按钮悬停效果
- ✅ 加载状态指示器
- ✅ 表单验证提示
- ✅ 步骤指示器
- ✅ 进度条动画
- ✅ 编辑器工具栏响应式
- ✅ 章节状态视觉反馈
- ✅ 拖拽上传视觉反馈
- ✅ PDF导出进度指示

### 视觉设计
- ✅ 现代化的界面设计
- ✅ 一致的颜色主题（蓝色系）
- ✅ 清晰的图标和视觉层次
- ✅ 美观的渐变封面选项
- ✅ 专业的编辑器界面
- ✅ 图片网格布局
- ✅ PDF导出界面设计

## 🔧 技术特性

### 认证状态管理
- ✅ 客户端状态管理
- ✅ localStorage持久化
- ✅ SSR兼容（避免hydration错误）

### 富文本编辑
- ✅ TipTap编辑器集成
- ✅ 多种扩展支持
- ✅ 实时内容更新
- ✅ 字符统计功能

### 文件上传
- ✅ React Dropzone集成
- ✅ 多文件上传支持
- ✅ 文件类型验证
- ✅ 文件大小限制
- ✅ 上传进度显示

### PDF生成
- ✅ jsPDF库集成
- ✅ 中文字体支持
- ✅ 自动分页处理
- ✅ 目录生成
- ✅ 页码添加

### 数据模拟
- ✅ 模拟用户数据
- ✅ 模拟项目数据
- ✅ 模拟章节数据
- ✅ 模拟文件上传

### 组件复用
- ✅ 模块化组件设计
- ✅ 统一的Button组件
- ✅ 可复用的Modal组件
- ✅ 独立的编辑器组件
- ✅ 可复用的上传组件

## 🚧 待开发功能

### Week 6-8 计划
- 🤖 AI文本润色功能 - 集成通义千问API
- 🎤 语音转文字功能 - 集成腾讯ASR服务
- 🗣️ 方言识别优化 - 集成讯飞API
- ✍️ AI写作辅助功能 - AI智能访谈和内容扩写

### 功能优化计划
- 🔄 章节拖拽排序 - 可视化章节重新排序
- ☁️ 云存储集成 - 真实的CloudBase文件存储
- 🖼️ 图片编辑 - 裁剪、滤镜等编辑功能
- 📱 移动端优化 - 触摸交互优化

## 💡 测试建议

### 基础功能测试
1. **多浏览器测试** - 在Chrome、Safari、Firefox中测试
2. **移动端测试** - 在手机浏览器中测试响应式布局
3. **用户流程测试** - 完整走通注册→登录→创建项目→写作的流程

### 编辑器专项测试
4. **编辑功能测试** - 测试所有格式化工具
5. **自动保存测试** - 编辑内容后等待2秒查看保存状态
6. **章节管理测试** - 创建、编辑、切换章节
7. **内容持久化测试** - 刷新页面检查内容是否保持
8. **字数统计测试** - 验证字符数和词数统计准确性

### 照片上传专项测试
9. **拖拽上传测试** - 测试拖拽不同格式的图片文件
10. **批量上传测试** - 同时选择多个图片文件上传
11. **文件大小测试** - 测试超过10MB的文件限制
12. **格式支持测试** - 测试JPG、PNG、GIF、WebP等格式
13. **插入编辑器测试** - 测试图片插入到编辑器的不同位置
14. **URL上传测试** - 测试通过URL添加网络图片

### PDF导出专项测试
15. **完整导出测试** - 测试包含多章节的完整回忆录导出
16. **单章节导出测试** - 测试单个章节的PDF导出
17. **中文内容测试** - 测试中文字符在PDF中的显示
18. **长文档测试** - 测试大量文本的分页效果
19. **图片内容测试** - 测试包含图片的章节导出
20. **文件下载测试** - 验证PDF文件能正确下载和打开

### 性能测试
21. **长文本编辑** - 测试大量文本的编辑性能
22. **多章节切换** - 测试频繁切换章节的响应速度
23. **大文件上传** - 测试接近10MB文件的上传性能
24. **PDF生成速度** - 测试不同文档大小的导出时间

## 🐛 已知问题

- 中文字体配置被简化（暂时只使用Inter字体）
- 项目和章节数据仅存储在内存中（刷新会重置）
- CloudBase实际集成待完善（目前使用模拟数据）
- 图片上传使用临时URL（待集成云存储）
- PDF中的图片依赖网络连接

## 🎯 体验重点

### 核心写作流程
1. **登录** → **工作台** → **创建项目** → **进入编辑器**
2. **创建章节** → **选择章节** → **开始写作** → **自动保存**
3. **格式化文本** → **插入媒体** → **章节管理** → **实时统计**
4. **上传照片** → **插入图片** → **PDF导出** → **完成作品**

### 最佳体验路径
建议按以下顺序体验完整功能：

#### 基础流程（10分钟）
1. 注册登录 → 创建第一个回忆录项目
2. 进入编辑器 → 体验默认章节内容
3. 创建新章节 → 使用富文本工具写作
4. 测试自动保存 → 切换章节查看内容保持

#### 进阶功能（15分钟）
5. 点击"📷 上传照片" → 拖拽上传本地图片
6. 将上传的图片插入到章节中
7. 尝试URL方式添加网络图片
8. 使用所有富文本格式化工具

#### 高级功能（10分钟）
9. 点击"📄 PDF导出" → 导出完整回忆录
10. 尝试单章节PDF导出功能
11. 检查导出的PDF文件内容和格式
12. 体验不同章节内容的导出效果

### 测试关键点
- **照片上传**：拖拽体验、预览效果、插入功能
- **PDF导出**：完整性、格式保持、中文支持
- **编辑器集成**：各功能间的协调工作
- **性能表现**：大文件处理、响应速度

---

**版本**: MVP v3.0 - 完整功能版  
**最后更新**: 2024年7月26日  
**新增功能**: 照片上传系统、PDF导出功能、编辑器功能集成 